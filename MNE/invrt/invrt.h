#ifndef INVRT_H
#define INVRT_H

//*************************************************************************************************************
//=============================================================================================================
// INCLUDES
//=============================================================================================================

#include "invrt_global.h"


//*************************************************************************************************************
//=============================================================================================================
// QT INCLUDES
//=============================================================================================================

#include <QThread>
#include <QMutex>


//*************************************************************************************************************
//=============================================================================================================
// Eigen INCLUDES
//=============================================================================================================

#include "../3rdParty/Eigen/Core"


//*************************************************************************************************************
//=============================================================================================================
// DEFINE NAMESPACE INVRTLIB
//=============================================================================================================

namespace INVRTLIB
{


//*************************************************************************************************************
//=============================================================================================================
// USED NAMESPACES
//=============================================================================================================

using namespace Eigen;
//using namespace IOBuffer;


//=============================================================================================================
/**
* DECLARE CLASS InvRt
*
* @brief The InvRt class provides...
*/
class INVRTSHARED_EXPORT InvRt : public QThread
{
    Q_OBJECT
public:
    explicit InvRt(QObject *parent = 0);

    //=========================================================================================================
    /**
    * Destroys the CovRt.
    */
    ~InvRt();

    void receiveNoiseCov(MatrixXf p_NoiseCov);

    //=========================================================================================================
    /**
    * Stops the InvRt by stopping the producer's thread.
    *
    * @return true if succeeded, false otherwise
    */
    virtual bool stop();

protected:
    //=========================================================================================================
    /**
    * The starting point for the thread. After calling start(), the newly created thread calls this function.
    * Returning from this method will end the execution of the thread.
    * Pure virtual method inherited by QThread.
    */
    virtual void run();

private:
    QMutex      mutex;
    bool        m_bIsRunning;           /**< Holds whether InvRt is running.*/

    MatrixXf    m_noiseCov;

signals:
    void invOperatorAvailable();

};

} // NAMESPACE

#endif // INVRT_H
